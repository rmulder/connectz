<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta name="format-detection" content="telephone=no" />
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
  <!-- <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" /> -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <title>meetz</title>
  <!-- jQuery Mobile CSS bits -->
  <link href="css/jquery.mobile-1.3.0.min.css" rel="stylesheet" />
  <!-- if you have a custom jQuery Mobile theme, add it here -->
  <link rel="stylesheet" href="css/connectz.css" />
  <link href="css/jqm-icon-pack-2.0-original.css" rel="stylesheet" />
  <!-- User-generated css -->
  <link rel="stylesheet" href="css/my.css" />

  <!-- Javascript includes -->
  <script src="js/jquery-1.9.0.min.js"></script>
  <script src="js/mobile-overrides.js"></script>

  <script src="js/jquery.mobile-1.3.0.min.js"></script>
  <script src="js/my.js"></script>

  <!-- User-generated js -->
  <script>

    $(function() {

    });

  </script>
</head>
<body>

<!-- home -->
<section data-role="page" id="home">
  <div data-theme="d" data-role="header" data-position="fixed">
    <div data-role="navbar" data-iconpos="top">
      <ul>
        <li><a href="#" data-role="tab" data-tab="who" data-transition="none" class="ui-btn-active ui-state-persist">who</a></li>
        <li><a href="#" data-role="tab" data-tab="what" data-transition="none">what</a></li>
        <li><a href="#" data-role="tab" data-tab="where" data-transition="none">where</a></li>
        <li><a href="#" data-role="tab" data-tab="when" data-transition="none">when</a></li>
      </ul>
    </div>
    <div id="meetz-message-row" class="hidden">
      <input name="" id="meetz_message" placeholder="Context:" value="" type="search" data-inline="true"><a href="#home" data-role="button" data-inline="true" class="search-button">Send</a>
    </div>
  </div><!-- /header -->

<!--
  <div data-role="popup" id="purchase" data-theme="d" data-overlay-theme="b" class="ui-content" style="max-width:340px; padding-bottom:2em;">
    <h3>Purchase Album?</h3>
    <p>Your download will begin immediately on your mobile device when you purchase.</p>
    <a href="index.html" data-role="button" data-rel="back" data-theme="b" data-icon="check" data-inline="true" data-mini="true">Buy: $10.99</a>
    <a href="index.html" data-role="button" data-rel="back" data-inline="true" data-mini="true">Cancel</a>
  </div>
-->
  <div data-role="content" class="scrollable">
    <div id="home-who">
      <ul id="contactList" data-role="listview" data-inset="false" data-theme="a" data-filter="true" data-filter-theme="a" data-filter-placeholder="Context:" data-split-icon="grid" data-split-theme="d">
        <li data-theme="b" data-role="list-divider">
          <div class="ui-grid-b" data-theme="c">
            <div class="ui-block-a" style="width:23%">Status</div>
            <div class="ui-block-b" style="width:42%">Name</div>
            <div class="ui-block-c" style="width:35%">Message #</div>
          </div>
        </li>
        <!--
        <li id="sample-row">
          <label data-corners="false"> <input type="checkbox" name="meetz-1 " class="checkbox-row" data-theme="a" value="1"/>
            <div class="ui-grid-b">
              <div class="ui-block-a" style="width:13%">AM</div>
              <div class="ui-block-b" style="width:49%">Anna Lisa Mulder</div>
              <div class="ui-block-c" style="width:38%"><a href="tel:4085551212">1 (707) 563-4404</a></div>
            </div>
          </label>
        </li>
        <li>
          <label data-corners="false"> <input type="checkbox" name="meetz-1 " class="checkbox-row" data-theme="f" value="2"/>
            <div class="ui-grid-b">
              <div class="ui-block-a" style="width:13%">AM</div>
              <div class="ui-block-b" style="width:49%">Anna Lisa Mulder</div>
              <div class="ui-block-c" style="width:38%"><a href="tel:4085551212">1 (707) 563-4404</a></div>
            </div>
          </label>
        </li>
        -->
      </ul>
    </div>

    <div id="home-what" class="hidden">
      <ul id="selectedList" data-role="listview" data-inset="false">
        <li class="selected-list-header" data-role="list-divider">
          <div class="ui-grid-b" data-theme="c">
            <div class="ui-block-a" style="width:23%">Status</div>
            <div class="ui-block-b" style="width:42%">Name</div>
            <div class="ui-block-c" style="width:35%">Message #</div>
          </div>
        </li>
        <li>
          <label data-corners="false"> <input type="checkbox" name="meetz-1 " class="checkbox-row" data-theme="a" value="2"/>
            <div class="ui-grid-b">
              <div class="ui-block-a" style="width:13%">AM</div>
              <div class="ui-block-b" style="width:49%">Anna Lisa Mulder</div>
              <div class="ui-block-c" style="width:38%"><a href="tel:4085551212">1 (707) 563-4404</a></div>
            </div>
          </label>
        </li>
      </ul>
    </div>
    <div id="home-where" class="hidden">
      <p>Where</p>
    </div>
    <div id="home-when" class="hidden">
      <p>When</p>
    </div>
  </div>
  <footer data-role="footer" data-position="fixed">
    <div data-role="navbar">
      <div data-role="tabbar" data-iconpos="top" data-theme="d">
        <ul>
          <li><a href="#home" data-transition="none" data-theme="d"><img src="img/home.png" width="60" height="60"></a></li>
          <li><a href="#meetz" data-transition="none" data-theme="d"><img src="img/meetz.png" width="60" height="60"></a></li>
          <li><a href="#mapz" data-transition="none" data-theme="d"><img src="img/map.png" width="60" height="60"></a></li>
        </ul>
      </div>
    </div><!-- /navbar -->
  </footer><!-- /footer -->

</section><!-- /home -->


<!-- meetz -->
<section data-role="page" id="meetz">
  <div data-theme="d" data-role="header" data-position="fixed">
    <div data-role="navbar" data-iconpos="top">
      <ul>
        <li><a href="#" data-transition="none" data-theme="" data-icon="" class="ui-btn-active ui-state-persist">who</a></li>
        <li><a href="#" data-transition="none" data-theme="" data-icon="">what</a></li>
        <li><a href="#" data-transition="none" data-theme="" data-icon="">where</a></li>
        <li><a href="#" data-transition="none" data-theme="" data-icon="">when</a></li>
      </ul>
    </div>
    <div>
      <input name="" id="searchinput2" placeholder="Context:" value="" type="search" data-inline="true"><a href="#home" data-role="button" data-inline="true" class="search-button">Send</a>
    </div>
  </div><!-- /header -->

  <div data-role="content">
  </div>
  <footer data-role="footer" data-position="fixed">
    <div data-role="navbar">
      <div data-role="tabbar" data-iconpos="top" data-theme="d">
        <ul>
          <li><a href="#home" data-transition="none" data-theme="d"><img src="img/home.png" width="60" height="60"></a></li>
          <li><a href="#meetz" data-transition="none" data-theme="d"><img src="img/meetz.png" width="60" height="60"></a></li>
          <li><a href="#mapz" data-transition="none" data-theme="d"><img src="img/map.png" width="60" height="60"></a></li>
        </ul>
      </div>
    </div><!-- /navbar -->
  </footer><!-- /footer -->
</section><!-- /meetz -->

<!-- mapz -->
<section data-role="page" id="mapz">
  <div data-theme="d" data-role="header" data-position="fixed">
    <div data-role="navbar" data-iconpos="top">
      <ul>
        <li><a href="#" data-transition="none" data-theme="" data-icon="" class="ui-btn-active ui-state-persist">who</a></li>
        <li><a href="#" data-transition="none" data-theme="" data-icon="">what</a></li>
        <li><a href="#" data-transition="none" data-theme="" data-icon="">where</a></li>
        <li><a href="#" data-transition="none" data-theme="" data-icon="">when</a></li>
      </ul>
    </div>
  </div><!-- /header -->

  <div data-role="content">
    <div class="ui-bar-c ui-corner-all ui-shadow" style="padding:1em;">
      <div id="map_canvas_1"></div>
      <p class="mapControls">
        <label for="from">From</label>
        <input id="from" class="ui-bar-c" type="text" value="click 'Get Directions' to localize" class="lookLikeLabel" />

      </p>
      <p class="mapControls">
        <label for="to">To</label>
        <input id="to" class="ui-bar-c" type="text" value="" />
      </p>
      <a id="submit" href="#" data-role="button" data-icon="search">Get directions</a>
    </div>
    <div id="results" class="ui-listview ui-listview-inset ui-corner-all ui-shadow" style="display:none;">

      <div class="ui-li ui-li-divider ui-btn ui-bar-a ui-corner-top ui-btn-up-undefined">Results</div>
      <div id="directions"></div>
      <div class="ui-li ui-li-divider ui-btn ui-bar-a ui-corner-bottom ui-btn-up-undefined"></div>
    </div>
    <div id="geolocation"></div>
  </div>
  <footer data-role="footer" data-position="fixed">
    <div data-role="navbar">
      <div data-role="tabbar" data-iconpos="top" data-theme="d">
        <ul>
          <li><a href="#home" data-transition="none" data-theme="d"><img src="img/home.png" width="60" height="60"></a></li>
          <li><a href="#meetz" data-transition="none" data-theme="d"><img src="img/meetz.png" width="60" height="60"></a></li>
          <li><a href="#mapz" data-transition="none" data-theme="d"><img src="img/map.png" width="60" height="60"></a></li>
        </ul>
      </div>
    </div><!-- /navbar -->
  </footer><!-- /footer -->
</section><!-- /mapz -->

<script type="text/javascript" src="cordova-2.4.0.js"></script>
<!--<script type="text/javascript" src="js/json2.js"></script>  -->
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="js/jquery.ui.map.full.min.js"></script>
<script type="text/javascript" src="js/jquery.ui.map.extensions.js"></script>
<script type="text/javascript" src="js/index.js"></script>
<script type="text/javascript">
  app.initialize();

  $(function() {
/*
    show_map.add(function() {
      $('#map_canvas').gmap({ 'disableDefaultUI':true, 'callback': function() {
        var self = this;
        self.getCurrentPosition(function(position, status) {
          if ( status === 'OK' ) {
            self.set('clientPosition', new google.maps.LatLng(position.coords.latitude, position.coords.longitude));
            self.addMarker({'position': self.get('clientPosition'), 'bounds': true});
            self.addShape('Circle', { 'strokeWeight': 0, 'fillColor': "#008595", 'fillOpacity': 0.25, 'center': self.get('clientPosition'), 'radius': 15, clickable: false });
          }
        });
      }});
    }).load();
*/

    var home = new google.maps.LatLng(37.3688889, -122.0352778);


    $('#mapz').on("pageshow", function() {
      $('#map_canvas_1').gmap('refresh');

    });


    $('#mapz').on("pagecreate", function() {

      $('#map_canvas_1').gmap({'center': home, 'zoom':13 });
      $('#map_canvas_1').gmap('addMarker', { 'position': home, 'animation' : google.maps.Animation.DROP } );


      $('#map_canvas_1').gmap('search', { 'location': home }, function (results) {

        $('#to').val(results[0].formatted_address);

      });

      $('#submit').click(function() {
        $('#map_canvas_1').gmap('getCurrentPosition', function(position, status) {
          $.mobile.showPageLoadingMsg ();
          if ( status === 'OK' ) {
            var latlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude)
            $('#map_canvas_1').gmap('get', 'map').panTo(latlng);
            $('#map_canvas_1').gmap('search', { 'location': latlng }, function(results, status) {
              if ( status === 'OK' ) {
                $('#from').val(results[0].formatted_address);
                $('#map_canvas_1').gmap('displayDirections', { 'origin': $('#from').val(), 'destination': $('#to').val(), 'travelMode': google.maps.DirectionsTravelMode.DRIVING }, { 'panel': document.getElementById('directions')}, function(response, status) {
                  $('#results').show();
                  $.mobile.hidePageLoadingMsg();
                });
              }
            });

          } else {
            $('#results').hide();
            var cM = 'unable to localize - please try entering a location manually';

            $("<div id='notification' class='ui-loader ui-overlay-shadow ui-body-e ui-corner-all'><h1>"+cM+"</h1></div>")
                .css({ "display": "block", "opacity": 0.96, "top": $(window).scrollTop() + 200})
                .appendTo( $.mobile.pageContainer )
                .delay( 400 )
                .fadeOut( 800, function(){
                  $(this).remove();
                });
          }

        }); // end submit
      });

    });

  });
/*
  $('#contactList li').on('click', function () {
    alert(this);
    console.log($(this).find('input'));
    var index = $(this).index();
    console.log('clicked:' + index);
    //alert('theme:' + $(this).find('label').data('theme'));
    $(this).find('label').data('theme', 'b');
    console.log($(this).find('label'));
  });
*/

  $("a[data-role=tab]").each(function () {
    var anchor = $(this), tmp = '', row = 0;
    console.log(anchor);
    anchor.on("click", function (e) {
      e.preventDefault();
      var tab = $(this).data('tab');
      tab = $(this).data('tab');
      switch (tab) {
        case 'what':
          $('#meetz-message-row').removeClass('hidden');
          console.log(app.selectedRows);
          //$('#selectedList').children().remove('li');
          $('#selectedList li').each(function(index, value) {
            if (index > 0) {
              //alert('index: ' + index + '; value: ' + value);
              $(this).remove();
            }
          });

          //alert('num items: ' + app.selectedRows.length);
          $.each(app.selectedRows, function(key, value) {
            console.log('key:');
            //console.log(key);
            console.log(value);
            console.log(app.contacts[value]);
            tmp += app.buildContactRow(app.contacts[value], value, row++, true);
          });
          $('#selectedList').append(tmp);
          //console.log(tmp);
          $('#selectedList').listview("refresh");
          $('#selectedList').trigger('create');
          break;
        default:
          $('#meetz-message-row').addClass('hidden');
          $('#home').css('padding-top', '37px');
          break;
      }
      $('#home-' + tab).siblings().addClass('hidden').end().removeClass('hidden');
      //$('#home').trigger('create');
    });

  });
</script>
</body>
</html>
